#!/usr/bin/env zsh

setopt ERREXIT
autoload -U colors && colors

if [[ $# -eq 0 ]]; then
  echo "Usage"
fi

command=$@[1]

function run {
  if [[ $# -eq 0 ]]; then
    echo "Nope!"
    exit -1
  fi
  environment=$1
  shift
  test -f $environment.env && source $environment.env
  ./$environment.run
}

case $command in
  :list)
    echo "list!"
    ;;
  :*)
    echo "Unknown command ${bold_color}$command{$reset_color}. Exiting." >&2
    exit -1
    ;;
  *)
    run $@
    ;;
esac